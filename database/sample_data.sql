-- ๐ ุฏุงุฏูโูุง ููููู ุจุฑุง ุชุณุช ุณุณุชู
-- ๐จโ๐ป ุทุฑุงุญ: ุนูุฑุถุง ุญุงูุฏ - ูพุงุฒ 1404
-- ๐ฏ ูุฏู: ุชุณุช ุนููฺฉุฑุฏ ุณุณุชู ุจุง ุฏุงุฏูโูุง ูุงูุน

-- โ๏ธ  ุงู ูุงู ููุท ุจุฑุง ุชุณุช ู ุขููุฒุด ุงุณุช
-- ุฏุฑ ูุญุท production ุงุฌุฑุง ูฺฉูุฏ

-- ===== ุฏุงุฑููุง ููููู =====
INSERT INTO drugs (
    name, generic_name, category, form, strength, unit, 
    manufacturer, price, minimum_stock, description
) VALUES 
-- ูุณฺฉูโูุง
('ุงุณุชุงููููู', 'Acetaminophen', 'ูุณฺฉู', 'ูุฑุต', '500mg', 'ุนุฏุฏ', 
 'ุดุฑฺฉุช ุฏุงุฑู ูพุฎุด', 1500, 50, 'ูุณฺฉู ู ุชุจโุจุฑ ุนููู'),

('ุงุจููพุฑููู', 'Ibuprofen', 'ูุณฺฉู', 'ูุฑุต', '400mg', 'ุนุฏุฏ',
 'ุฏุงุฑูุณุงุฒ ุงูุจุฑุฒ', 2000, 30, 'ุถุฏ ุงูุชูุงุจ ู ูุณฺฉู'),

('ุขุณูพุฑู', 'Aspirin', 'ูุณฺฉู', 'ูุฑุต', '80mg', 'ุนุฏุฏ',
 'ุดุฑฺฉุช ุณูุง ุฏุงุฑู', 800, 100, 'ูุณฺฉู ู ุถุฏ ุงูุนูุงุฏ'),

-- ุขูุชโุจูุชฺฉโูุง
('ุขููฺฉุณโุณูู', 'Amoxicillin', 'ุขูุชโุจูุชฺฉ', 'ฺฉูพุณูู', '500mg', 'ุนุฏุฏ',
 'ุดุฑฺฉุช ุทุจ ุฏุงุฑ', 5000, 20, 'ุขูุชโุจูุชฺฉ ูพูโุณูู'),

('ุขุฒุชุฑููุงุณู', 'Azithromycin', 'ุขูุชโุจูุชฺฉ', 'ูุฑุต', '250mg', 'ุนุฏุฏ',
 'ุฏุงุฑูุณุงุฒ ูพุงุฑุณ', 8000, 15, 'ุขูุชโุจูุชฺฉ ูุงฺฉุฑููุฏ'),

-- ูุชุงููโูุง
('ูุชุงูู D3', 'Cholecalciferol', 'ูุชุงูู', 'ูุฑุต', '1000IU', 'ุนุฏุฏ',
 'ุดุฑฺฉุช ุฒูุฑุงู', 3000, 40, 'ุชููุช ุงุณุชุฎูุงู ู ุงูู'),

('ูุชุงูู C', 'Ascorbic Acid', 'ูุชุงูู', 'ูุฑุต ุฌูุฏู', '500mg', 'ุนุฏุฏ',
 'ุฏุงุฑูุณุงุฒ ฺฉูุง', 1200, 60, 'ุชููุช ุณุณุชู ุงูู'),

-- ุฏุงุฑููุง ฺฏูุงุฑุด
('ุงููพุฑุงุฒูู', 'Omeprazole', 'ฺฏูุงุฑุด', 'ฺฉูพุณูู', '20mg', 'ุนุฏุฏ',
 'ุดุฑฺฉุช ุฏุงุฑู ูพุฎุด', 4500, 25, 'ุฏุฑูุงู ุฒุฎู ูุนุฏู'),

('ุณูุชฺฉูู', 'Simethicone', 'ฺฏูุงุฑุด', 'ูุฑุต', '40mg', 'ุนุฏุฏ',
 'ุฏุงุฑูุณุงุฒ ุงูุจุฑุฒ', 2200, 35, 'ุฑูุน ููุฎ ุดฺฉู'),

-- ุฏุงุฑููุง ููุจ
('ุขุชูุฑูุงุณุชุงุชู', 'Atorvastatin', 'ููุจ-ุนุฑูู', 'ูุฑุต', '20mg', 'ุนุฏุฏ',
 'ุดุฑฺฉุช ุณูุง ุฏุงุฑู', 12000, 10, 'ฺฉุงูุด ฺฉูุณุชุฑูู');

-- ===== ููุฌูุฏ ุงูุจุงุฑ =====
INSERT INTO inventory (
    drug_id, warehouse_id, quantity, batch_number, expiry_date, cost_price, selling_price
) 
SELECT 
    d.id,
    w.id,
    CASE 
        WHEN d.name = 'ุงุณุชุงููููู' THEN 150
        WHEN d.name = 'ุงุจููพุฑููู' THEN 80
        WHEN d.name = 'ุขุณูพุฑู' THEN 200
        WHEN d.name = 'ุขููฺฉุณโุณูู' THEN 45
        WHEN d.name = 'ุขุฒุชุฑููุงุณู' THEN 30
        WHEN d.name = 'ูุชุงูู D3' THEN 120
        WHEN d.name = 'ูุชุงูู C' THEN 180
        WHEN d.name = 'ุงููพุฑุงุฒูู' THEN 60
        WHEN d.name = 'ุณูุชฺฉูู' THEN 90
        WHEN d.name = 'ุขุชูุฑูุงุณุชุงุชู' THEN 25
        ELSE 50
    END as quantity,
    'BATCH-' || UPPER(SUBSTRING(d.name FROM 1 FOR 3)) || '-2024',
    CURRENT_DATE + INTERVAL '1 year',
    d.price * 0.7, -- ููุช ุฎุฑุฏ 70% ููุช ูุฑูุด
    d.price
FROM drugs d
CROSS JOIN warehouses w
WHERE w.code = 'MAIN';

-- ===== ุชุญุฑฺฉุงุช ููุฌูุฏ ููููู =====
INSERT INTO inventory_movements (
    inventory_id, movement_type, quantity, remaining_quantity, 
    unit_price, total_price, reference_number, notes
)
SELECT 
    i.id,
    'in',
    i.quantity,
    i.quantity,
    i.cost_price,
    i.cost_price * i.quantity,
    'REC-' || TO_CHAR(CURRENT_DATE, 'YYYYMMDD') || '-001',
    'ููุฌูุฏ ุงููู'
FROM inventory i
LIMIT 10;

-- ===== ุงุนูุงูุงุช ููููู =====
INSERT INTO notifications (
    user_id, type, title, message
) VALUES 
(
    '00000000-0000-0000-0000-000000000001',
    'system',
    'ุฎูุด ุขูุฏุฏ',
    'ุณุณุชู ูุฏุฑุช ุงูุจุงุฑ ุจุง ููููุช ุฑุงูโุงูุฏุงุฒ ุดุฏ'
),
(
    '00000000-0000-0000-0000-000000000002',
    'low_stock',
    'ููุฌูุฏ ฺฉู',
    'ููุฌูุฏ ุจุฑุฎ ุฏุงุฑููุง ฺฉูุชุฑ ุงุฒ ุญุฏ ูุฌุงุฒ ุงุณุช'
);

-- ===== ฺฏุฒุงุฑุด ููุง =====
DO $$
DECLARE
    drug_count INTEGER;
    inventory_count INTEGER;
    movement_count INTEGER;
BEGIN
    SELECT COUNT(*) INTO drug_count FROM drugs;
    SELECT COUNT(*) INTO inventory_count FROM inventory;
    SELECT COUNT(*) INTO movement_count FROM inventory_movements;
    
    RAISE NOTICE '๐ ุฏุงุฏูโูุง ููููู ุจุง ููููุช ุงุถุงูู ุดุฏ:';
    RAISE NOTICE '   ๐ ุฏุงุฑููุง: %', drug_count;
    RAISE NOTICE '   ๐ฆ ููุฌูุฏ: %', inventory_count;
    RAISE NOTICE '   ๐ ุชุญุฑฺฉุงุช: %', movement_count;
    RAISE NOTICE 'โ ุณุณุชู ุขูุงุฏู ุชุณุช ุงุณุช!';
END $$;

-- ===== ูฺฉุงุช ููู =====
/*
๐ก ุฑุงูููุง ุงุณุชูุงุฏู:

1๏ธโฃ ุงุจุชุฏุง schema.sql ุฑุง ุงุฌุฑุง ฺฉูุฏ
2๏ธโฃ ุณูพุณ ุงู ูุงู ุฑุง ุงุฌุฑุง ฺฉูุฏ
3๏ธโฃ ุจุง ฺฉุงุฑุจุฑ superadmin ูุงุฑุฏ ุดูุฏ
4๏ธโฃ ุนููฺฉุฑุฏ ุณุณุชู ุฑุง ุชุณุช ฺฉูุฏ

๐ ููุงุฑุฏ ุชุณุช ุดุฏู:
โ 10 ุฏุงุฑู ุฏุฑ ุฏุณุชูโูุง ูุฎุชูู
โ ููุฌูุฏ ุฏุฑ ุงูุจุงุฑ ุงุตู
โ ุชุญุฑฺฉุงุช ูุฑูุฏ
โ ุงุนูุงูุงุช ุณุณุชู

โ๏ธ  ุชูุฌู:
- ุงู ุฏุงุฏูโูุง ููุท ุจุฑุง ุชุณุช ูุณุชูุฏ
- ุฏุฑ production ุญุฐู ฺฉูุฏ
- ุจุง ุฏุงุฏูโูุง ูุงูุน ุฌุงฺฏุฒู ฺฉูุฏ

๐จโ๐ป ุชูุณุนูโุฏููุฏู: ุนูุฑุถุง ุญุงูุฏ
๐ง ุงูู: alireza.h67@gmail.com
*/