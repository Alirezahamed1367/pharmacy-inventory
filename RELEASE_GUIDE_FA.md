# ุฑุงูููุง ุงูุชุดุงุฑ ู ุงุณุชูุฑุงุฑ ููุง ุณุณุชู ูุฏุฑุช ุงูุจุงุฑ ุฏุงุฑู

ุงู ุณูุฏ ฺฏุงูโุจูโฺฏุงู ูุฑุขูุฏ ุขูุงุฏูโุณุงุฒุ ุงุณุชูุฑุงุฑ ู ุชุณุช ูุณุฎู Production ุฑุง ุชูุถุญ ูโุฏูุฏ.

## 1. ุฑุงูุจุฑุฏ ุงุณุชูุฑุงุฑ
ุงูฺฏู ุงูุชุฎุงุจโุดุฏู: ฺฉ ูุฎุฒู GitHub + Vercel (Preview ุจุฑุง ูุฑ PR) + ฺฉ ูพุฑูฺู Supabase (ุฏุฑ ูุงุฒ ุงูู). ุฏุฑ ูุฑุญูู ุจุนุฏ ูโุชูุงู ูพุฑูฺู Supabase ุฏูู ุจุฑุง Staging ุงุฌุงุฏ ฺฉุฑุฏ.

## 2. ูพุดโูุงุฒูุง
- ุญุณุงุจ GitHub
- ุญุณุงุจ Vercel
- ุญุณุงุจ Supabase
- Node.js 20+
- ุฏุณุชุฑุณ ุงุฌุฑุง SQL ุฏุฑ Supabase

## 3. ูุชุบุฑูุง ูุญุท (Env)
ุฏุฑ ุฑุดู ูพุฑูฺู ูุงู `.env.local` ุจุณุงุฒุฏ (ุง ุฏุฑ Vercel โ Settings โ Environment Variables ุชุนุฑู ฺฉูุฏ):

```
VITE_SUPABASE_URL=https://YOUR-PROJECT.supabase.co
VITE_SUPABASE_ANON_KEY=YOUR_PUBLIC_ANON_KEY
```

ูุงู ููููู: `.env.example`.

## 4. ุฑุงูโุงูุฏุงุฒ Supabase
1. ุงุฌุงุฏ ูพุฑูฺู ุฌุฏุฏ ุฏุฑ Supabase (Region ูุฒุฏฺฉ).
2. ูุงุฑุฏ ุจุฎุด SQL Editor ุดูุฏ.
3. ูุญุชูุง `database/schema.sql` ุฑุง ุงุฌุฑุง ฺฉูุฏ.
4. ุชูุงู ูุงูโูุง ูพูุดู `database/migrations` ุฑุง ุจู ุชุฑุชุจ ุฒูุงู ุงุฌุฑุง ฺฉูุฏ (ููุงุฌุฑุช ุงุฎุฑ: `2025_10_03_add_supplier_per_item_and_document_date.sql`).
5. ุฏุฑ Storage ฺฉ Bucket ุจู ูุงู `drug-images` ุจุณุงุฒุฏ (Public).
6. (ุงุฎุชุงุฑ) CORS ุจุฑุง ุฏุงููู Vercel ุฑุง ุงุถุงูู ฺฉูุฏ.
7. ุฏุฑ ุฌุฏูู `users` ุฑฺฉูุฑุฏ superadmin ุทุจู seed ููุฌูุฏ ุงุณุช (ูุงู ฺฉุงุฑุจุฑ: `superadmin`).
8. ฺูุฏ ุชุงููโฺฉููุฏู ู ุงูุจุงุฑ ููููู ุงุถุงูู ฺฉูุฏ:
```sql
insert into public.suppliers (name) values ('ุชุงููโฺฉููุฏู ุงูู'),('ุดุฑฺฉุช ุจูุฏุงุดุชโฺฏุณุชุฑ');
insert into public.warehouses (name, location) values ('ุงูุจุงุฑ ูุฑฺฉุฒ','ุชูุฑุงู'),('ุงูุจุงุฑ ุบุฑุจ','ฺฉุฑุฌ');
```

## 5. ุขูุงุฏูโุณุงุฒ ูุฎุฒู GitHub
1. ูุฎุฒู ุงุฌุงุฏ ฺฉูุฏ (private ุง public).
2. ฺฉู ูพุฑูฺู ููฺฉุงู ุฑุง push ฺฉูุฏ (`main` ุจู ุนููุงู ุดุงุฎู ุงุตู).
3. Branch Protection (ุงุฎุชุงุฑ): ูุงุฒ ุจู PR review ูุจู ุงุฒ merge.
4. Tag ูุณุฎู ุงููู: `v1.0.0` ุจุนุฏ ุงุฒ ุงููู ุงุณุชูุฑุงุฑ ูููู.

## 6. ุงุชุตุงู ุจู Vercel
1. New Project โ Import from GitHub โ ุงูุชุฎุงุจ ูุฎุฒู.
2. Framework: Vite (Auto detect).
3. Build Command: `npm run build` โ Output: `dist`.
4. Env Vars: ููุฏุงุฑุฏู ููุงู ุฏู ูุชุบุฑ.
5. Deploy.
6. ุฏุงููู Production ุซุจุช ู ุฏุฑ ุตูุฑุช ูุงุฒ ุฏุงููู ุณูุงุฑุด ูุตู ุดูุฏ.

## 7. Smoke Test ุจุนุฏ ุงุฒ Deploy
ุฑู ุณุฑูุฑ (ูุญุท Vercel) ุงุชููุงุชฺฉ Build ุดุฏู ุงุณุช. ุจู URL Production ุจุฑูุฏ:
1. ูุฑูุฏ ุจุง `superadmin / A25893Aa`.
2. ุณุงุฎุช ฺฉ ุฏุงุฑู (ูุงู ููููู + ุชุงุฑุฎ ุงููุถุง ุขูุฏู + ุชุตูุฑ ฺฉูฺฺฉ).
3. ุงุฌุงุฏ ุฑุณุฏ ุจุง ฺฉ ุขุชู (ุงูุจุงุฑ ููุตุฏ = ุงูุจุงุฑ ูุฑฺฉุฒ). ุชฺฉูู ุฑุณุฏ.
4. ุจุฑุฑุณ Dashboard (ุขูุงุฑ + ูุนุงูุช ุงุฎุฑ).
5. ุงุฌุงุฏ ุญูุงูู ุงูุชูุงู ุจู ุฏู ุงูุจุงุฑ (ุฏุฑ ุตูุฑุช ููุฌูุฏ) ู ุชฺฉูู.
6. ุจุฑุฑุณ ุชุจ ยซฺฏุฒุงุฑุด ุญุฑฺฉุงุชยป โ ุฑฺฉูุฑุฏูุง ุฏุฏู ุดููุฏ.
7. ุขูพููุฏ ุชุตูุฑ ู ูุดุงูุฏู URL (Network 200 ู ููุงุด ุฏุฑ ุฌุฏูู ุฏุงุฑููุง).

## 8. ุงุฌุฑุง ุงุณฺฉุฑูพุช Smoke ูุญู (ุงุฎุชุงุฑ)
```
node scripts/smokeCheck.mjs
```
ููุงุฑุฏ ุญุงุช (env ู ุชูุงุจุน) ุจุงุฏ PASS ุจุฑฺฏุฑุฏุงููุฏ.

## 9. ฺฺฉโูุณุช ุงููุช ู ุณุฎุชโุณุงุฒ
- ูุนุงูโุณุงุฒ RLS ุจุนุฏ ุงุฒ ููุง ุดุฏู (ูุนูุงู ุบุฑูุนุงู ุจุฑุง ุชูุณุนู).
- ุงูุฒูุฏู ุณุงุณุชโูุง: ููุท ููุดโูุง ูุฌุงุฒ ุจุชูุงููุฏ ุฏุฑุฌ/ูุฑุงุด.
- ุจุฑุฑุณ Public Bucket: ุงฺฏุฑ ูุงุฒ ุจู ูุญุฏูุฏุช ุฏุงุดุชุ ููฺฉโูุง ุงูุถุงุดุฏู (signed URLs).
- ุณุงุณุช ุฑูุฒ ุนุจูุฑ: ุญุฏุงูู 8 ฺฉุงุฑุงฺฉุชุฑุ ูพฺุฏฺฏ (ุฏุฑ UI enforce).
- Rate Limiting: ุฏุฑ ุขูุฏู ุจุง edge function ุง Reverse Proxy.
- Audit Log: ุฌุฏูู ุณุงุฏู ุจุฑุง ุฏุฑุฌ ุฑุฎุฏุงุฏูุง ุญุณุงุณ (ุซุจุช/ุญุฐู ุฏุงุฑูุ ุชฺฉูู ุฑุณุฏ/ุญูุงูู).

## 10. ุงูุชุดุงุฑ ูุณุฎู (Release)
1. ูพุณ ุงุฒ ุนุจูุฑ ุงุฒ ุชุณุชโูุง: ุงุฌุงุฏ Tag ุฏุฑ GitHub:
```
git tag v1.0.0
git push origin v1.0.0
```
2. ุฏุฑ ุจุฎุด Releases ุชูุถุญุงุช ุชุบุฑุงุช.
3. ุจุนุฏ ุงุฒ ูุฑ ุจูุจูุฏ ููู: ุงูุฒุงุด ูุณุฎู (Semantic Versioning: MAJOR.MINOR.PATCH).

## 11. ุณูุงุฑููุง ุชุณุช ุฏุณุช (ูพุณ ุงุฒ ูุฑ ุงูุชุดุงุฑ)
1. Login / Logout.
2. ุชุบุฑ ุฑูุฒ ุนุจูุฑ (ฺฉุงุฑุจุฑ ุชุณุช).
3. ุงุฌุงุฏ 3 ุฏุงุฑู ุจุง ุชุงุฑุฎโูุง ูุฎุชูู (Expired, 0โ30, 31โ90 ุฑูุฒ) โ ูุดุงูุฏู ุฏุฑ ฺฏุฒุงุฑุด.
4. ุฑุณุฏ ุจุง 2 ุขุชู ู ุฏู ุชุงููโฺฉููุฏู ูุชูุงูุช โ ุชฺฉูู โ ุจุฑุฑุณ ููุฌูุฏ.
5. ุญูุงูู ุจู ุงูุจุงุฑูุง โ ูุบุงุฑุช (ฺฉ ุขุชู ุฑุง ุจุง ุชุนุฏุงุฏ ูุชูุงูุช ุฏุฑุงูุช ฺฉูุฏ) โ ูุถุนุช discrepancy.
6. ุขูพููุฏ ุชุตูุฑ + ุญุฐู ู ุฌุงฺฏุฒู.
7. ฺฏุฒุงุฑุด ุญุฑฺฉุงุช: ุชุฑุชุจ ุฒูุงู ุตุญุญ.
8. ฺฏุฒุงุฑุด ููุฌูุฏ: ููุชุฑ ูุงู ุฏุงุฑู.

## 12. ุจุฑูุงูู ูฺฏูุฏุงุฑ / ูพุดุชุจุงูโฺฏุฑ
- ุงุณุชูุงุฏู ุงุฒ ุงุณฺฉุฑูพุช `backup_system.py` (ุชูุธู ฺฉุฑุงู ุฑู ุณุฑูุฑ ูุณุชูู ุง GitHub Action ุฑูุฒุงูู ุจุง Supabase dump โ Secure Storage).
- ูฺฏูุฏุงุฑ ุญุฏุงูู 7 ูุณุฎู ุฑูุฒุงูู + 4 ูุณุฎู ููุชฺฏ.

## 13. ฺฏุณุชุฑุด ุขุช (Backlog ูพุดููุงุฏ)
- Dark Mode.
- ุงุนูุงู ุฎูุฏฺฉุงุฑ ุฏุงุฑููุง ูุฒุฏฺฉ ุงููุถุง (Scheduled Function).
- RLS + JWT Auth ฺฉุงููุงู ุงุฒููู.
- ฺฏุฒุงุฑุด PDF.
- Dashboard Real-time (ฺฉุงูุงูโูุง Supabase Realtime).

ูููู ุจุงุดุฏ ๐ฑ
